import secrets
import string

def generate_password(length=12, upper=True, digits=True, punctuation=True):
    pool = string.ascii_lowercase
    if upper:
        pool += string.ascii_uppercase
    if digits:
        pool += string.digits
    if punctuation:
        pool += string.punctuation
    if not pool:
        return ""
    return "".join(secrets.choice(pool) for _ in range(length))

def yes(s):
    return s.strip().lower() in ("y", "yes", "1", "true", "t")

while True:
    try:
        length = int(input("Password length (e.g. 12): ").strip() or "12")
    except ValueError:
        print("Enter a valid number.")
        continue
    u = yes(input("Include uppercase? (y/n) [y]: ") or "y")
    d = yes(input("Include digits? (y/n) [y]: ") or "y")
    p = yes(input("Include punctuation? (y/n) [y]: ") or "y")
    try:
        count = int(input("How many passwords to generate [1]: ").strip() or "1")
    except ValueError:
        count = 1
    for i in range(count):
        print(generate_password(length, u, d, p))
    if not yes(input("Generate more? (y/n) [n]: ") or "n"):
        break
